<!DOCTYPE html>
<html>
<head>
  <title>Socket.io Example</title>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    // í† í° ê°€ì ¸ì˜¤ê¸° (ì˜ˆ: localStorageì—ì„œ)
    const token = localStorage.getItem('token');

    const socket = io({
      auth: {
        token: token
      }
    });

    // ì—°ê²° ìƒíƒœ ëª¨ë‹ˆí„°ë§
    socket.on('connect', () => {
      console.log('âœ… ì„œë²„ì— ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.');
      console.log('Socket ID:', socket.id);
    });

    socket.on('connect_error', (error) => {
      console.error('âŒ ì—°ê²° ì˜¤ë¥˜:', error);
    });

    socket.on('disconnect', () => {
      console.log('âŒ ì„œë²„ì™€ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤.');
    });

    // ê·¸ë¦¬ê¸° ì´ë²¤íŠ¸ ìˆ˜ì‹  ëª¨ë‹ˆí„°ë§
    socket.on('drawLine', (data) => {
      console.log('ğŸ“ ê·¸ë¦¬ê¸° ë°ì´í„° ìˆ˜ì‹ :', data);
    });

    // ì‚¬ìš©ì ì°¸ê°€ ì´ë²¤íŠ¸ ëª¨ë‹ˆí„°ë§
    socket.on('userJoined', (data) => {
      console.log('ğŸ‘‹ ìƒˆ ì‚¬ìš©ì ì°¸ê°€:', data);
    });

    // ì‚¬ìš©ì í‡´ì¥ ì´ë²¤íŠ¸ ëª¨ë‹ˆí„°ë§
    socket.on('userLeft', (data) => {
      console.log('ğŸ‘‹ ì‚¬ìš©ì í‡´ì¥:', data);
    });

    // ë””ë²„ê¹…ì„ ìœ„í•œ ì „ì—­ í•¨ìˆ˜
    window.debugSocket = {
      getSocketId: () => socket.id,
      getConnected: () => socket.connected,
      getRooms: () => socket.rooms
    };
  </script>
</head>
<body>
  <h1>Socket.io Example</h1>
  <div id="debug-info" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc;">
    <h3>ë””ë²„ê·¸ ì •ë³´</h3>
    <button onclick="console.log('Socket ID:', window.debugSocket.getSocketId())">Socket ID í™•ì¸</button>
    <button onclick="console.log('ì—°ê²° ìƒíƒœ:', window.debugSocket.getConnected())">ì—°ê²° ìƒíƒœ í™•ì¸</button>
    <button onclick="console.log('ì°¸ì—¬ ì¤‘ì¸ ë°©:', window.debugSocket.getRooms())">ì°¸ì—¬ ì¤‘ì¸ ë°© í™•ì¸</button>
  </div>
</body>
</html>